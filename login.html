<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Charles Severance - Rock Paper Scissors cbfb4718</title>

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

</head>
<body>
<div class="container">
    <h1>Login to Rock Paper Scissors</h1>

    <div id="loginDiv" class="col-md-6">
        <p id="loginError" class="text-danger"></p>
        <form id="loginForm" class="form-horizontal">
            <div class="form-group">
                <label class="col-sm-2 control-label" for="who">Name:</label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" id="who" name="who" placeholder="Enter your name">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="pass">Password:</label>
                <div class="col-sm-10">
                    <input type="password" class="form-control" id="pass" name="pass" placeholder="Enter password">
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary">Log In</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="container">
<h1>Rock Paper Scissors</h1>

<p id="welcome"></p>

<form id="rpsForm" method="post">
    <select id="humanPlay" name="human" class="form-control" style="width:200px; display:inline-block;">
        <option value="-1">Select</option>
        <option value="0">Rock</option>
        <option value="1">Paper</option>
        <option value="2">Scissors</option>
        <option value="3">Test</option>
    </select>
    <input type="button" value="Play" class="btn btn-primary" onclick="play()">
    <input type="button" value="Logout" class="btn btn-danger" onclick="logout()">
</form>

<pre id="result">Please select a strategy and press Play.</pre>
</div>

<script>
const NAMES = ["Rock", "Paper", "Scissors"];
let loggedInUser = null;

// Получаем имя пользователя из URL-параметра
const params = new URLSearchParams(window.location.search);
//if (params.has('name')) {
//    loggedInUser = params.get('name');
//    document.getElementById('welcome').textContent = 'Welcome: ' + loggedInUser;
//} else {
//    document.body.innerHTML = "<h2>Name parameter missing</h2>";
//}

function logout() {
    window.location.href = 'login.html';
}

function check(computer, human) {
    if (computer === human) return "Tie";
    if ((human - computer + 3) % 3 === 1) return "You Win";
    return "You Lose";
}

function play() {
    if (!loggedInUser) return;

    const humanChoice = document.getElementById('humanPlay').value;
    const resultDiv = document.getElementById('result');
    resultDiv.textContent = '';

    if (humanChoice === "-1") return;

    if (humanChoice === "3") { // Test
        for (let c = 0; c < 3; c++) {
            for (let h = 0; h < 3; h++) {
                const r = check(c, h);
                resultDiv.textContent += `Human=${NAMES[h]} Computer=${NAMES[c]} Result=${r}\n`;
            }
        }
    } else {
        const human = parseInt(humanChoice);
        const computer = Math.floor(Math.random() * 3);
        const outcome = check(computer, human);
        resultDiv.textContent = `Your Play=${NAMES[human]} Computer Play=${NAMES[computer]} Result=${outcome}`;
    }
}
</script>
    

<script>
// Simple client-side login simulation
document.getElementById('loginForm').onsubmit = function() {
    const who = document.getElementById('who').value.trim();
    const pass = document.getElementById('pass').value;
    const errorDiv = document.getElementById('loginError');

    if (!who || !pass) {
        errorDiv.textContent = 'User name and password are required';
        return false;
    }
    if (pass !== 'php123') {
        errorDiv.textContent = 'Incorrect password';
        return false;
    }

    // Redirect to game page with name parameter
    window.location.href = 'game.html?name=' + encodeURIComponent(who);
    return false;
};
</script>
</body>
</html>
