<!DOCTYPE html>
<html>
<head>
    <title>Kornilov Sergei cbfb4718</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .hidden { display: none; }
    </style>
</head>
<body>

<!-- Login Screen -->
<div id="loginDiv">
    <h2>Login</h2>
    <p id="loginError" style="color:red;"></p>
    <form onsubmit="return login()">
        <label for="who">Name:</label>
        <input type="text" id="who" name="who"><br><br>
        <label for="pass">Password:</label>
        <input type="password" id="pass" name="pass"><br><br>
        <button type="submit">Log In</button>
    </form>
</div>

<!-- Game Screen -->
<div id="gameDiv" class="hidden">
    <h2>Rock Paper Scissors</h2>
    <p id="welcome"></p>
    <select id="humanPlay">
        <option value="">--Choose--</option>
        <option value="0">Rock</option>
        <option value="1">Paper</option>
        <option value="2">Scissors</option>
        <option value="test">Test</option>
    </select>
    <button onclick="play()">Play</button>
    <button onclick="logout()">Logout</button>

    <pre id="result"></pre>
</div>

<script>
const SALT = 'XyZzy12*_';
const STORED_HASH = '1a52e17fa899cf40fb04cfc42e6352f1'; // hash of salt + 'php123'
const NAMES = ["Rock", "Paper", "Scissors"];
let loggedInUser = null;

// Simple MD5 function using external script or library required. 
// For demo purposes, we'll "simulate" checking the password with plaintext
function login() {
    const who = document.getElementById('who').value.trim();
    const pass = document.getElementById('pass').value;

    if (!who || !pass) {
        document.getElementById('loginError').textContent = 'User name and password are required';
        return false;
    }

    // Simulate hash check: correct password is php123
    if (pass !== 'php123') {
        document.getElementById('loginError').textContent = 'Incorrect password';
        return false;
    }

    // Login successful
    loggedInUser = who;
    document.getElementById('loginDiv').classList.add('hidden');
    document.getElementById('gameDiv').classList.remove('hidden');
    document.getElementById('welcome').textContent = 'Welcome, ' + who;
    return false; // prevent actual form submission
}

function logout() {
    loggedInUser = null;
    document.getElementById('gameDiv').classList.add('hidden');
    document.getElementById('loginDiv').classList.remove('hidden');
    document.getElementById('who').value = '';
    document.getElementById('pass').value = '';
    document.getElementById('loginError').textContent = '';
    document.getElementById('result').textContent = '';
}

function check(computer, human) {
    if (computer === human) return "Tie";
    if ((human - computer + 3) % 3 === 1) return "You Win";
    return "You Lose";
}

function play() {
    if (!loggedInUser) {
        alert("Name parameter missing");
        return;
    }

    const humanChoice = document.getElementById('humanPlay').value;
    const resultDiv = document.getElementById('result');
    resultDiv.textContent = '';

    if (humanChoice === "") return;

    if (humanChoice === "test") {
        for (let c=0; c<3; c++) {
            for (let h=0; h<3; h++) {
                const r = check(c,h);
                resultDiv.textContent += `Human=${NAMES[h]} Computer=${NAMES[c]} Result=${r}\n`;
            }
        }
    } else {
        const human = parseInt(humanChoice);
        const computer = Math.floor(Math.random()*3);
        const outcome = check(computer, human);
        resultDiv.textContent = `Your Play=${NAMES[human]} Computer Play=${NAMES[computer]} Result=${outcome}`;
    }
}
</script>
</body>
</html>
